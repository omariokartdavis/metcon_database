{% extends "base_generic.html" %}

{% block content %}
	{% if user.is_authenticated %}
		{% if user.is_coach or user.is_gym_owner %}
			<h1>Edit Schedule For {{ workout.display_name }}</h1>
			
			{% if athletes %}
				<p>Edit this workout schedule for the following athletes: 
				{% for i in athletes %}{{ i.user.username }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
			{% endif %}
			
			{% if workout.is_general_workout %}
				{{ workout.workout_text|linebreaks }}</p>
			{% elif workout.is_strength_workout %}
				{% for se in workout.strength_exercises.all %}
					<p><strong>{{ se.movement.name }}</strong></br >
					{% for se_set in se.set_set.all %}
						Set {{ se_set.set_number }}: {% if se_set.reps %}{{ se_set.reps }}{% else %}Max{% endif %} rep{% if se_set.reps > 1 or not se_set.reps %}s{% endif %}{% if se_set.weight %} at {{ se_set.weight|floatformat:"-1" }}{{ se_set.weight_units }}{% endif %}{% if se_set.weight_units == '%' %} of 1 rep max{% endif %}</br >
					{% endfor %}
					</p>
				{% endfor %}
			{% elif workout.is_cardio_workout %}
				{% for ce in workout.cardio_exercises.all %}
					<p><strong>{{ ce.movement.name }}</strong></br >
					{% if ce.number_of_reps %}{{ ce.number_of_reps }} x {% endif %}{{ ce.distance }}{{ ce.distance_units }}{% if ce.rest %} with {% if ce.rest_in_minutes > 0 %}{{ ce.rest_in_minutes }}min{% endif %}{% if ce.rest_remainder > 0 %} {{ ce.rest_remainder }}s{% endif %} rest{% endif %}{% if ce.pace %} at {{ ce.pace }} pace{% endif %}</br >
					{% if ce.comment %}{{ ce.comment }}{% endif %}
				{% endfor %}
			{% endif %}
			
			{% if workout_scheduled_dates %}
				<p>Hold Ctrl while clicking to select multiple dates to be removed.</p>
			{% endif %}
			
			<form method="post">
				{% csrf_token %}
				<table>
				{{ form.as_table }}
				</table>
				<input type="submit" value="Submit" name="edit schedule for all athletes">
			</form>
		{% else %}
			<p>You do not have permission to view this page. Please login with an account that has proper permissions.</p>
		{% endif %}
	{% else %}
		<p>Please login to view this page.</p>
	{% endif %}
{% endblock %}
